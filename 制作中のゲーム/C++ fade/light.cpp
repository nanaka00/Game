//=================================================================================================================
//
// ライトの処理　〔bg.cpp〕
// Anthor:Nanaka maeno
//
//=================================================================================================================
#include "bg.h"
#include "manager.h"
#include "scene2D.h"
#include "scene.h"
#include "input.h"
#include "keyboard.h"
#include "renderer.h"
#include "light.h"

//*******************************************************************************************************
// 静的メンバ変数宣言
//*******************************************************************************************************
LPDIRECT3DTEXTURE9 CLight::m_pTexture;

//======================================================================================================
// コンストラクタ
//======================================================================================================
CLight::CLight()
{

	// 0クリア
	m_apScene2D = NULL;

}

//======================================================================================================
// デストラクタ
//======================================================================================================
CLight::~CLight()
{
}

//======================================================================================================
//　ライトの初期化処理
//======================================================================================================
HRESULT CLight::Init(D3DXVECTOR3 pos, D3DXVECTOR3 scale)
{
	// 初期化
	m_apScene2D = new CScene2D;
	m_apScene2D->Init(pos, scale);
	m_apScene2D->BindTexture(m_pTexture);

	return S_OK;
}

//======================================================================================================
//　ライトの終了処理
//======================================================================================================
void CLight::Uninit(void)
{
		m_apScene2D->Uninit();
		m_apScene2D = NULL;

	Release();
}

//======================================================================================================
// ライトの更新処理
//======================================================================================================
void CLight::Update(void)
{
	// キーボードの取得処理
	CInputKeyboard *pInputKeyboard;
	pInputKeyboard = CManager::GetInputKeyboard();
}

//======================================================================================================
// ライトの描画処理
//======================================================================================================
void CLight::Draw(void)
{

}

//======================================================================================================
// ライトの生成処理
//======================================================================================================
CLight *CLight::Create(D3DXVECTOR3 pos, D3DXVECTOR3 scale)
{
	CLight *pLight = NULL;
	pLight = new CLight;
	pLight->Init(pos, scale);

	return pLight;
}

//======================================================================================================
// テクスチャの読み込み処理
//======================================================================================================
HRESULT CLight::Load(void)
{
	// デバイスの取得
	LPDIRECT3DDEVICE9 pDevice;
	pDevice = CManager::GetRenderer()->GetDevice();

	// テクスチャの読み込み
	D3DXCreateTextureFromFile(pDevice, "data\\TEXTURE\\light (2).png", &m_pTexture);

	return S_OK;

}

//======================================================================================================
// テクスチャの破棄処理
//======================================================================================================
void CLight::Unload(void)
{
	for (int nCnt = 0; nCnt < MAX_BG; nCnt++)
	{
		// テクスチャの破棄
		if (m_pTexture != NULL)
		{
			m_pTexture->Release();
			m_pTexture = NULL;
		}
	}
}
